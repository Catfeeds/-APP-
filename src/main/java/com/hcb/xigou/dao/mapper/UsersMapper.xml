<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.hcb.xigou.dao.interfaceClass.UsersMapper" >
  <resultMap id="BaseResultMap" type="com.hcb.xigou.pojo.Users" >
    <id column="fake_id" property="fakeId" jdbcType="INTEGER" />
    <result column="user_uuid" property="userUuid" jdbcType="VARCHAR" />
    <result column="create_datetime" property="createDatetime" jdbcType="TIMESTAMP" />
    <result column="update_datetime" property="updateDatetime" jdbcType="TIMESTAMP" />
    <result column="delete_at" property="deleteAt" jdbcType="VARCHAR" />
    <result column="password" property="password" jdbcType="VARCHAR" />
    <result column="userId" property="userid" jdbcType="INTEGER" />
    <result column="phone" property="phone" jdbcType="VARCHAR" />
    <result column="nickname" property="nickname" jdbcType="VARCHAR" />
    <result column="headimgurl" property="headimgurl" jdbcType="VARCHAR" />
    <result column="sex" property="sex" jdbcType="TINYINT" />
    <result column="birthday" property="birthday" jdbcType="DATE" />
    <result column="country" property="country" jdbcType="VARCHAR" />
    <result column="province" property="province" jdbcType="VARCHAR" />
    <result column="city" property="city" jdbcType="VARCHAR" />
    <result column="unionid" property="unionid" jdbcType="VARCHAR" />
    <result column="openid" property="openid" jdbcType="VARCHAR" />
    <result column="balance" property="balance" jdbcType="DECIMAL" />
    <result column="coupons" property="coupons" jdbcType="INTEGER" />
    <result column="coins" property="coins" jdbcType="INTEGER" />
    <result column="fraction" property="fraction" jdbcType="INTEGER" />
    <result column="grade" property="grade" jdbcType="CHAR" />
    <result column="codes" property="codes" jdbcType="VARCHAR" />
    <result column="client_id" property="clientId" jdbcType="VARCHAR" />
    <result column="device_token" property="deviceToken" jdbcType="VARCHAR" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="device_name" property="deviceName" jdbcType="VARCHAR" />
    <result column="device_osver" property="deviceOsver" jdbcType="VARCHAR" />
    <result column="app_version" property="appVersion" jdbcType="VARCHAR" />
    <result column="store_uuid" property="storeUuid" jdbcType="VARCHAR" />
    <result column="member_card_number" property="memberCardNumber" jdbcType="VARCHAR" />
    <result column="register_time" property="registerTime" jdbcType="TIMESTAMP" />
    <result column="address" property="address" jdbcType="VARCHAR" />
    <result column="order_number" property="orderNumber" jdbcType="INTEGER" />
    <result column="total_money" property="totalMoney" jdbcType="DECIMAL" />
    <result column="lately_time" property="latelyTime" jdbcType="TIMESTAMP" />
  </resultMap>
  <sql id="Base_Column_List" >
    fake_id, user_uuid, create_datetime, update_datetime, delete_at, password, userId, 
    phone, nickname, headimgurl, sex, birthday, country, province, city, unionid, openid, 
    balance, coupons, coins, fraction, grade, codes, client_id, device_token, name, device_name, 
    device_osver, app_version, store_uuid, member_card_number,register_time,address,order_number,
    total_money,lately_time
  </sql>
  
  <!-- 登陆 -->
   <select id="selectByUserAndPassword" resultMap="BaseResultMap" parameterType="java.util.HashMap">
  		select
  		<include refid="Base_Column_List" />
  		from users 
  		where user_uuid = #{userUuid,jdbcType=VARCHAR} and password = #{password,jdbcType=VARCHAR}
  </select>
  
  <!-- 今日注册人数 -->
  <select id="registerCount" resultType="java.lang.Integer" parameterType="java.util.HashMap" >
  	select count(1)
  	from users  
  	where register_time &gt;= #{firstDay,jdbcType=VARCHAR} and register_time &lt;= #{lastDay,jdbcType=VARCHAR} and delete_at is null
  </select>
  <!-- 会员列表 -->
    <select id="selectByPaging" resultMap="BaseResultMap" parameterType="java.util.HashMap">
  	select 
  	<include refid="Base_Column_List" />
  	from users
  	where  grade IS NOT NULL 
  	<if test="name != null and name != ''">
  		and name like CONCAT(CONCAT('%', #{name,jdbcType=VARCHAR}), '%')
  	</if>
  	<if test="nickname != null and nickname != ''">
  		and nickname like CONCAT(CONCAT('%', #{nickname,jdbcType=VARCHAR}), '%')
  	</if>
  	<if test="phone != null and phone != ''">
  		and phone = #{phone,jdbcType=VARCHAR}
  	</if>
  	<if test="memberCardNumber != null and memberCardNumber != ''">
  		and member_card_number = #{memberCardNumber,jdbcType=VARCHAR}
  	</if>
  	<if test="grade != null and grade != ''">
  		and grade = #{grade,jdbcType=VARCHAR}
  	</if>
  	order by create_datetime desc LIMIT #{start},#{end}
  </select>
    <select id="totalCount" resultType="java.lang.Integer" parameterType="java.util.HashMap" >
  	select count(1)
  	from users
  	where grade IS NOT NULL
  	<if test="name != null and name != ''">
  		and name like CONCAT(CONCAT('%', #{name,jdbcType=VARCHAR}), '%')
  	</if>
  	<if test="nickname != null and nickname != ''">
  		and nickname like CONCAT(CONCAT('%', #{nickname,jdbcType=VARCHAR}), '%')
  	</if>
  	<if test="phone != null and phone != ''">
  		and phone = #{phone,jdbcType=VARCHAR}
  	</if>
  	<if test="memberCardNumber != null and memberCardNumber != ''">
  		and member_card_number = #{memberCardNumber,jdbcType=VARCHAR}
  	</if>
    <if test="grade != null and grade != ''">
  		and grade = #{grade,jdbcType=VARCHAR}
  	</if>
  </select>
  <!-- 用戶列表 -->
  <select id="selectByUserList" resultMap="BaseResultMap" parameterType="java.util.HashMap">
  	select 
  	<include refid="Base_Column_List" />
  	from users
  	where delete_at is null
  	<if test="name != null and name != ''">
  		and name like CONCAT(CONCAT('%', #{name,jdbcType=VARCHAR}), '%')
  	</if>
  	<if test="nickname != null and nickname != ''">
  		and nickname like CONCAT(CONCAT('%', #{nickname,jdbcType=VARCHAR}), '%')
  	</if>
  	<if test="phone != null and phone != ''">
  		and phone = #{phone,jdbcType=VARCHAR}
  	</if>
    <if test="firstDay != null and lastDay != null">
  		and register_time &gt;= #{firstDay,jdbcType=VARCHAR} and register_time &lt;= #{lastDay,jdbcType=VARCHAR}
  	</if>
  	<if test="numberStart != null and numberStart != ''">
  		and order_number &gt;= #{numberStart,jdbcType=INTEGER}
  	</if>
  	<if test="numberEnd != null and numberEnd != ''">
  		and order_number &lt;= #{numberEnd,jdbcType=INTEGER}
  	</if>
    <if test="moneyStart != null and moneyStart != ''">
  		and total_money &gt;= #{moneyStart,jdbcType=VARCHAR}
  	</if>
  	<if test="moneyEnd != null and moneyEnd != ''">
  		and total_money &lt;= #{moneyEnd,jdbcType=VARCHAR}
  	</if>
  	order by create_datetime desc LIMIT #{start},#{end}
  </select>
  <select id="totalCountUserList" resultType="java.lang.Integer" parameterType="java.util.HashMap" >
  	select count(1)
  	from users
  	where delete_at is null
  	<if test="name != null and name != ''">
  		and name like CONCAT(CONCAT('%', #{name,jdbcType=VARCHAR}), '%')
  	</if>
  	<if test="nickname != null and nickname != ''">
  		and nickname like CONCAT(CONCAT('%', #{nickname,jdbcType=VARCHAR}), '%')
  	</if>
  	<if test="phone != null and phone != ''">
  		and phone = #{phone,jdbcType=VARCHAR}
  	</if>
  	<if test="firstDay != null and lastDay != null">
  		and register_time &gt;= #{firstDay,jdbcType=VARCHAR} and register_time &lt;= #{lastDay,jdbcType=VARCHAR}
  	</if>
  		<if test="numberStart != null and numberStart != ''">
  		and order_number &gt;= #{numberStart,jdbcType=INTEGER}
  	</if>
  	<if test="numberEnd != null and numberEnd != ''">
  		and order_number &lt;= #{numberEnd,jdbcType=INTEGER}
  	</if>
    <if test="moneyStart != null and moneyStart != ''">
  		and total_money &gt;= #{moneyStart,jdbcType=VARCHAR}
  	</if>
  	<if test="moneyEnd != null and moneyEnd != ''">
  		and total_money &lt;= #{moneyEnd,jdbcType=VARCHAR}
  	</if>
  </select>
  
  
  
  
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select 
    <include refid="Base_Column_List" />
    from users
    where fake_id = #{fakeId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    delete from users
    where fake_id = #{fakeId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.hcb.xigou.pojo.Users" >
    insert into users (fake_id, user_uuid, create_datetime, 
      update_datetime, delete_at, password, 
      userId, phone, nickname, 
      headimgurl, sex, birthday, 
      country, province, city, 
      unionid, openid, balance, 
      coupons, coins, fraction, 
      grade, codes, client_id, 
      device_token, name, device_name, 
      device_osver, app_version, store_uuid, 
      member_card_number,register_time,address,
      order_number,total_money,lately_time
      )
    values (#{fakeId,jdbcType=INTEGER}, #{userUuid,jdbcType=VARCHAR}, #{createDatetime,jdbcType=TIMESTAMP}, 
      #{updateDatetime,jdbcType=TIMESTAMP}, #{deleteAt,jdbcType=VARCHAR}, #{password,jdbcType=VARCHAR}, 
      #{userid,jdbcType=INTEGER}, #{phone,jdbcType=VARCHAR}, #{nickname,jdbcType=VARCHAR}, 
      #{headimgurl,jdbcType=VARCHAR}, #{sex,jdbcType=TINYINT}, #{birthday,jdbcType=DATE}, 
      #{country,jdbcType=VARCHAR}, #{province,jdbcType=VARCHAR}, #{city,jdbcType=VARCHAR}, 
      #{unionid,jdbcType=VARCHAR}, #{openid,jdbcType=VARCHAR}, #{balance,jdbcType=DECIMAL}, 
      #{coupons,jdbcType=INTEGER}, #{coins,jdbcType=INTEGER}, #{fraction,jdbcType=INTEGER}, 
      #{grade,jdbcType=CHAR}, #{codes,jdbcType=VARCHAR}, #{clientId,jdbcType=VARCHAR}, 
      #{deviceToken,jdbcType=VARCHAR}, #{name,jdbcType=VARCHAR}, #{deviceName,jdbcType=VARCHAR}, 
      #{deviceOsver,jdbcType=VARCHAR}, #{appVersion,jdbcType=VARCHAR}, #{storeUuid,jdbcType=VARCHAR}, 
      #{memberCardNumber,jdbcType=VARCHAR},#{registerTime,jdbcType=TIMESTAMP},#{address,jdbcType=VARCHAR},
      #{orderNumber,jdbcType=INTEGER}, #{totalMoney,jdbcType=DECIMAL},#{latelyTime,jdbcType=TIMESTAMP}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.hcb.xigou.pojo.Users" >
    insert into users
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="fakeId != null" >
        fake_id,
      </if>
      <if test="userUuid != null" >
        user_uuid,
      </if>
      <if test="createDatetime != null" >
        create_datetime,
      </if>
      <if test="updateDatetime != null" >
        update_datetime,
      </if>
      <if test="deleteAt != null" >
        delete_at,
      </if>
      <if test="password != null" >
        password,
      </if>
      <if test="userid != null" >
        userId,
      </if>
      <if test="phone != null" >
        phone,
      </if>
      <if test="nickname != null" >
        nickname,
      </if>
      <if test="headimgurl != null" >
        headimgurl,
      </if>
      <if test="sex != null" >
        sex,
      </if>
      <if test="birthday != null" >
        birthday,
      </if>
      <if test="country != null" >
        country,
      </if>
      <if test="province != null" >
        province,
      </if>
      <if test="city != null" >
        city,
      </if>
      <if test="unionid != null" >
        unionid,
      </if>
      <if test="openid != null" >
        openid,
      </if>
      <if test="balance != null" >
        balance,
      </if>
      <if test="coupons != null" >
        coupons,
      </if>
      <if test="coins != null" >
        coins,
      </if>
      <if test="fraction != null" >
        fraction,
      </if>
      <if test="grade != null" >
        grade,
      </if>
      <if test="codes != null" >
        codes,
      </if>
      <if test="clientId != null" >
        client_id,
      </if>
      <if test="deviceToken != null" >
        device_token,
      </if>
      <if test="name != null" >
        name,
      </if>
      <if test="deviceName != null" >
        device_name,
      </if>
      <if test="deviceOsver != null" >
        device_osver,
      </if>
      <if test="appVersion != null" >
        app_version,
      </if>
      <if test="storeUuid != null" >
        store_uuid,
      </if>
      <if test="memberCardNumber != null" >
        member_card_number,
      </if>
     <if test="registerTime != null" >
        register_time,
      </if>
      <if test="address != null" >
        address,
      </if>
      <if test="orderNumber != null" >
        order_number,
      </if>
      <if test="totalMoney != null" >
        total_money,
      </if>
      <if test="latelyTime != null" >
        lately_time,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="fakeId != null" >
        #{fakeId,jdbcType=INTEGER},
      </if>
      <if test="userUuid != null" >
        #{userUuid,jdbcType=VARCHAR},
      </if>
      <if test="createDatetime != null" >
        #{createDatetime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateDatetime != null" >
        #{updateDatetime,jdbcType=TIMESTAMP},
      </if>
      <if test="deleteAt != null" >
        #{deleteAt,jdbcType=VARCHAR},
      </if>
      <if test="password != null" >
        #{password,jdbcType=VARCHAR},
      </if>
      <if test="userid != null" >
        #{userid,jdbcType=INTEGER},
      </if>
      <if test="phone != null" >
        #{phone,jdbcType=VARCHAR},
      </if>
      <if test="nickname != null" >
        #{nickname,jdbcType=VARCHAR},
      </if>
      <if test="headimgurl != null" >
        #{headimgurl,jdbcType=VARCHAR},
      </if>
      <if test="sex != null" >
        #{sex,jdbcType=TINYINT},
      </if>
      <if test="birthday != null" >
        #{birthday,jdbcType=DATE},
      </if>
      <if test="country != null" >
        #{country,jdbcType=VARCHAR},
      </if>
      <if test="province != null" >
        #{province,jdbcType=VARCHAR},
      </if>
      <if test="city != null" >
        #{city,jdbcType=VARCHAR},
      </if>
      <if test="unionid != null" >
        #{unionid,jdbcType=VARCHAR},
      </if>
      <if test="openid != null" >
        #{openid,jdbcType=VARCHAR},
      </if>
      <if test="balance != null" >
        #{balance,jdbcType=DECIMAL},
      </if>
      <if test="coupons != null" >
        #{coupons,jdbcType=INTEGER},
      </if>
      <if test="coins != null" >
        #{coins,jdbcType=INTEGER},
      </if>
      <if test="fraction != null" >
        #{fraction,jdbcType=INTEGER},
      </if>
      <if test="grade != null" >
        #{grade,jdbcType=CHAR},
      </if>
      <if test="codes != null" >
        #{codes,jdbcType=VARCHAR},
      </if>
      <if test="clientId != null" >
        #{clientId,jdbcType=VARCHAR},
      </if>
      <if test="deviceToken != null" >
        #{deviceToken,jdbcType=VARCHAR},
      </if>
      <if test="name != null" >
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="deviceName != null" >
        #{deviceName,jdbcType=VARCHAR},
      </if>
      <if test="deviceOsver != null" >
        #{deviceOsver,jdbcType=VARCHAR},
      </if>
      <if test="appVersion != null" >
        #{appVersion,jdbcType=VARCHAR},
      </if>
      <if test="storeUuid != null" >
        #{storeUuid,jdbcType=VARCHAR},
      </if>
      <if test="memberCardNumber != null" >
        #{memberCardNumber,jdbcType=VARCHAR},
      </if>
      <if test="registerTime != null" >
        #{registerTime,jdbcType=TIMESTAMP},
      </if>
      <if test="address != null" >
        #{address,jdbcType=VARCHAR},
      </if>
      <if test="orderNumber != null" >
        #{orderNumber,jdbcType=INTEGER},
      </if>
      <if test="totalMoney != null" >
        #{totalMoney,jdbcType=DECIMAL},
      </if>
      <if test="latelyTime != null" >
        #{latelyTime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  
  <update id="updateByPrimaryKeySelective" parameterType="com.hcb.xigou.pojo.Users" >
    update users
    <set >
      <if test="userUuid != null" >
        user_uuid = #{userUuid,jdbcType=VARCHAR},
      </if>
      <if test="createDatetime != null" >
        create_datetime = #{createDatetime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateDatetime != null" >
        update_datetime = #{updateDatetime,jdbcType=TIMESTAMP},
      </if>
      <if test="deleteAt != null" >
        delete_at = #{deleteAt,jdbcType=VARCHAR},
      </if>
      <if test="password != null" >
        password = #{password,jdbcType=VARCHAR},
      </if>
      <if test="userid != null" >
        userId = #{userid,jdbcType=INTEGER},
      </if>
      <if test="phone != null" >
        phone = #{phone,jdbcType=VARCHAR},
      </if>
      <if test="nickname != null" >
        nickname = #{nickname,jdbcType=VARCHAR},
      </if>
      <if test="headimgurl != null" >
        headimgurl = #{headimgurl,jdbcType=VARCHAR},
      </if>
      <if test="sex != null" >
        sex = #{sex,jdbcType=TINYINT},
      </if>
      <if test="birthday != null" >
        birthday = #{birthday,jdbcType=DATE},
      </if>
      <if test="country != null" >
        country = #{country,jdbcType=VARCHAR},
      </if>
      <if test="province != null" >
        province = #{province,jdbcType=VARCHAR},
      </if>
      <if test="city != null" >
        city = #{city,jdbcType=VARCHAR},
      </if>
      <if test="unionid != null" >
        unionid = #{unionid,jdbcType=VARCHAR},
      </if>
      <if test="openid != null" >
        openid = #{openid,jdbcType=VARCHAR},
      </if>
      <if test="balance != null" >
        balance = #{balance,jdbcType=DECIMAL},
      </if>
      <if test="coupons != null" >
        coupons = #{coupons,jdbcType=INTEGER},
      </if>
      <if test="coins != null" >
        coins = #{coins,jdbcType=INTEGER},
      </if>
      <if test="fraction != null" >
        fraction = #{fraction,jdbcType=INTEGER},
      </if>
      <if test="grade != null" >
        grade = #{grade,jdbcType=CHAR},
      </if>
      <if test="codes != null" >
        codes = #{codes,jdbcType=VARCHAR},
      </if>
      <if test="clientId != null" >
        client_id = #{clientId,jdbcType=VARCHAR},
      </if>
      <if test="deviceToken != null" >
        device_token = #{deviceToken,jdbcType=VARCHAR},
      </if>
      <if test="name != null" >
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="deviceName != null" >
        device_name = #{deviceName,jdbcType=VARCHAR},
      </if>
      <if test="deviceOsver != null" >
        device_osver = #{deviceOsver,jdbcType=VARCHAR},
      </if>
      <if test="appVersion != null" >
        app_version = #{appVersion,jdbcType=VARCHAR},
      </if>
      <if test="storeUuid != null" >
        store_uuid = #{storeUuid,jdbcType=VARCHAR},
      </if>
      <if test="memberCardNumber != null" >
        member_card_number = #{memberCardNumber,jdbcType=VARCHAR},
      </if>
      <if test="registerTime != null" >
        register_time = #{registerTime,jdbcType=TIMESTAMP},
      </if>
      <if test="address != null" >
        address = #{address,jdbcType=VARCHAR},
      </if>
      <if test="orderNumber != null" >
        order_number = #{orderNumber,jdbcType=INTEGER},
      </if>
      <if test="totalMoney != null" >
        total_money = #{totalMoney,jdbcType=DECIMAL},
      </if>
      <if test="latelyTime != null" >
        lately_time = #{latelyTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where fake_id = #{fakeId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.hcb.xigou.pojo.Users" >
    update users
    set user_uuid = #{userUuid,jdbcType=VARCHAR},
      create_datetime = #{createDatetime,jdbcType=TIMESTAMP},
      update_datetime = #{updateDatetime,jdbcType=TIMESTAMP},
      delete_at = #{deleteAt,jdbcType=VARCHAR},
      password = #{password,jdbcType=VARCHAR},
      userId = #{userid,jdbcType=INTEGER},
      phone = #{phone,jdbcType=VARCHAR},
      nickname = #{nickname,jdbcType=VARCHAR},
      headimgurl = #{headimgurl,jdbcType=VARCHAR},
      sex = #{sex,jdbcType=TINYINT},
      birthday = #{birthday,jdbcType=DATE},
      country = #{country,jdbcType=VARCHAR},
      province = #{province,jdbcType=VARCHAR},
      city = #{city,jdbcType=VARCHAR},
      unionid = #{unionid,jdbcType=VARCHAR},
      openid = #{openid,jdbcType=VARCHAR},
      balance = #{balance,jdbcType=DECIMAL},
      coupons = #{coupons,jdbcType=INTEGER},
      coins = #{coins,jdbcType=INTEGER},
      fraction = #{fraction,jdbcType=INTEGER},
      grade = #{grade,jdbcType=CHAR},
      codes = #{codes,jdbcType=VARCHAR},
      client_id = #{clientId,jdbcType=VARCHAR},
      device_token = #{deviceToken,jdbcType=VARCHAR},
      name = #{name,jdbcType=VARCHAR},
      device_name = #{deviceName,jdbcType=VARCHAR},
      device_osver = #{deviceOsver,jdbcType=VARCHAR},
      app_version = #{appVersion,jdbcType=VARCHAR},
      store_uuid = #{storeUuid,jdbcType=VARCHAR},
      member_card_number = #{memberCardNumber,jdbcType=VARCHAR},
      register_time = #{registerTime,jdbcType=TIMESTAMP},
      address = #{address,jdbcType=VARCHAR},
      order_number = #{orderNumber,jdbcType=INTEGER},
      total_money = #{totalMoney,jdbcType=DECIMAL},
      lately_time = #{latelyTime,jdbcType=TIMESTAMP}
    where fake_id = #{fakeId,jdbcType=INTEGER}
  </update>
</mapper>